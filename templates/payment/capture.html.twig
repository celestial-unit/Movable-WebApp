{% extends 'front/base.html.twig' %}

{% block body %}
<div class="container mt-5 text-center">
    <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Loading...</span>
    </div>
    <h2 class="mt-3">Redirecting to Secure Payment...</h2>
    <p class="text-muted">Please wait while we connect to Stripe Checkout. This may take a moment.</p>
</div>

<form id="redirect-form" action="{{ actionUrl }}" method="POST">
    <input type="hidden" name="ticket_id" value="{{ ticket.id }}">
</form>

{% for label, messages in app.flashes %}
    <div class="alert alert-{{ label }}" role="alert">
        {% for message in messages %}
            <p>{{ message }}</p>
        {% endfor %}
    </div>
{% endfor %}

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Auto-submit form after short delay for better UX
        setTimeout(function() {
            document.getElementById('redirect-form').submit();
        }, 2000);  // You can adjust the delay as needed
    });
</script>
{% endblock %}
