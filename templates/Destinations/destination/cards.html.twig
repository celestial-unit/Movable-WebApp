{% extends 'base.html.twig' %}

{% block title %}Destinations{% endblock %}

{% block stylesheets %}
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    {# Add Font Awesome #}
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="{{ asset('css/main.css') }}">
    <link rel="stylesheet" href="{{ asset('css/destination.css') }}">
    
    
{% endblock %}

{% block body %}
    <div class="row card-container">
        {% for destination in destinations %}
            <div class="col-md-3 mb-3">
                <a href="{{ path('app_destination_show', {'idDestination': destination.idDestination}) }}" 
                   class="card-link">
                    <div class="destination-card h-100">
                  <!-- Heart button with click handler -->
                    <button class="btn btn-heart position-absolute top-0 end-0 m-2 p-2" 
                            onclick="toggleHeart(this)">
                        <i class="far fa-heart"></i> <!-- Start with outline heart -->
                    </button>
                        {% if destination.image %}
                            <img src="{{ asset('uploads/destinations/' ~ destination.image) }}" 
                                 alt="{{ destination.name }}" 
                                 class="destination-image">
                        {% else %}
                            <img src="{{ asset('image/default.png') }}" 
                                 alt="No Image" 
                                 class="destination-image">
                        {% endif %}
                        <div class="destination-content">
                            <div class="destination-title">{{ destination.name }}</div>
                            <div class="destination-location">{{ destination.location }}</div>
                            <p class="destination-description">
                                {{ destination.description|length > 150
                                    ? destination.description|slice(0, 150) ~ '...'
                                    : destination.description }}
                            </p>
                            <div class="text-muted small mt-2">
                                <i class="fas fa-parking"></i>
                                {{ destination.parkingSpots|length }} parking spots available
                            </div>
                            <!-- Custom-colored select button -->
                    <div class="position-absolute bottom-0 end-0 m-2">
                        <a href="{{ path('app_destination_show', {'idDestination': destination.idDestination}) }}" 
                           class="btn btn-select custom-select-button">
                            <i class="fas fa-check me-2"></i>Select
                        </a>
                    </div>
                        </div>
                    </div>
                </a>
            </div>
        {% else %}
            <p class="text-center">No destinations available.</p>
        {% endfor %}
    </div>
{% endblock %}